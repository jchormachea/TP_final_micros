/***************************************************************************//**
 @file     pwm.c
 @brief    pwm for .c file
 @author   Conradeus
 ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/
#include "pwm.h"
#include "hardware.h"
#include "board.h"
/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/


/*******************************************************************************
 * ENUMERATIONS AND STRUCTURES AND TYPEDEFS
 ******************************************************************************/

/*******************************************************************************
 * VARIABLES WITH GLOBAL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * STATIC VARIABLES AND CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/


/*******************************************************************************
 *******************************************************************************
 GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/
void pwm_init(void){
    P2SEL   |= PIN_PWM; //TA1.2 function
    P2SEL2  |= PIN_PWM;
    P2DIR   |= PIN_PWM; //output

    TA1CCR0 = 1000;       // Periodo
    TA1CCTL2 = OUTMOD_7;      // Modo de salida: Reset/Set
    TA1CCR2 = 10;            // dutycicle incial (1%)
    TA1CTL = TASSEL_2 + MC_1; // Fuente SMCLK, modo Up 
}
void pwm_setDC(uint8_t duty_cicle){
    TA1CCR2 = duty_cicle;
}

int pwm_getDC(void){
    
    return TA1CCR2;
}
/*******************************************************************************
 LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/


/******************************************************************************/

